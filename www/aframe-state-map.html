<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>State Map â€¢ A-Frame</title>
    <meta name="description" content="Election VR : State Map in A-Frame">
    <script src="/dist/aframe-state-map.js"></script>
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="https://d3js.org/d3-selection.v1.min.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
</head>
<body>
<a-scene>
    <a-entity svgpath="svgPath: M 15,1 20,37 H 10 L 1,1 Z; color: green" position="1 1.2 0" rotation="0 180 0"></a-entity>
    <a-entity id="container"></a-entity>
    <a-sky color="#ECECEC"></a-sky>
    <a-entity position="0 0 3.8">
        <a-camera></a-camera>
    </a-entity>
</a-scene>
<script>
    var path = d3.geoPath();

    var ready = (error, us) => {
        if (error) throw error;

        var scene = d3.select("a-scene");

        var states = scene
            .selectAll(".state")
            .data(topojson.feature(us, us.objects.states).features)
            .enter()
            .append("a-entity")
            .classed('state', true)
            .attr("position", function(d) {
            	console.log(path(d));
//            	var centroid = path.centroid(d);
//            	return centroid[0]/100 + " -" + centroid[1]/100 + " 1";
            	var bounds = path.bounds(d);
            	return (bounds[0][0]/100)*1.25 + " -" + (bounds[1][1]/100)*1.25 + " 1";
            })
//            .attr("scale", "0.5 0.5 1")
            .attr("rotation", "0 0 0")
            .attr("svgpath", function(d) { return "svgPath: "+ path(d) +"; color: red" });
    };

    d3.queue()
        .defer(d3.json, "us-10m.v1.json")
        .await(ready);

</script>
</body>
</html>
