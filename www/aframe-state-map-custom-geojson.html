<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>State Map geojson â€¢ A-Frame</title>
    <meta name="description" content="Election VR : State Map using custom A-Frame geojson component">
    <script type="application/javascript" src="dist/manifest.js"></script>
    <script type="application/javascript" src="dist/vendor-head.js"></script>
</head>
<body>
<a-scene>
    <a-assets>
        <a-asset-item id="json-states-10m" src="gz_2010_us_040_00_500k.json" />
    </a-assets>


    <a-entity id="states-plate"
              position="-2 0 -5"
              class="gazeactivated"
              geometry="primitive: plane; width: 10; height: 10;"
              material="color: #000; transparent: true;"
              my-geojson="src: #json-states-10m; featureKey: STATE; topologyObject: states; lineWidth: 1;"
              visible="true"
              selection-to-text
    >
    </a-entity>

    <a-camera id="camera"  user-height="0" wasd-controls-enabled="true" look-controls-enabled="true">
        <a-text id="infoText" color="black" value="" position="0.5 0 -0.8" scale="0.4 0.4 0.4"></a-text>

        <a-cursor fuse objects=".gazeactivated" interval="2000"></a-cursor>
    </a-camera>
</a-scene>
<script type="application/javascript">
    const states = document.getElementById("states-plate");
    states.addEventListener("geojson-loaded", function(event) {
        const californiaGeometry = event.detail.data.get("06").shape.geometry;
        californiaGeometry.computeBoundingBox();
        const californiaCenter = californiaGeometry.boundingBox.getCenter();
        console.log("California center", californiaCenter);

        const maineGeometry = event.detail.data.get("23").shape.geometry;
        maineGeometry.computeBoundingBox();
        const maineCenter = maineGeometry.boundingBox.getCenter();
        console.log("Maine center", maineCenter);

        const offset = new THREE.Vector3(-2, 0, -5);
        const sceneEl = document.querySelector('a-scene');
        const maineSphere = document.createElement('a-sphere');
        maineSphere.setAttribute("radius", "0.2");
        maineSphere.setAttribute("color", "#FFC65D");
        maineSphere.setAttribute("position", maineCenter);
        states.appendChild(maineSphere);

        const californiaSphere = document.createElement('a-sphere');
        californiaSphere.setAttribute("radius", "0.2");
        californiaSphere.setAttribute("color", "#ff3853");
        californiaSphere.setAttribute("position", californiaCenter);
        states.appendChild(californiaSphere);
    });
</script>
</body>
</html>
