<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>D3.js • A-Frame</title>
    <meta name="description" content="Hello, World! • A-Frame">
    <script src="https://aframe.io/releases/0.4.0/aframe.min.js"></script>
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="https://d3js.org/d3-selection.v1.min.js"></script>
    <style>
        body {
            margin: 0;
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background-color: white;
        }
    </style>
</head>
<body>
<a-scene id="container">
    <!-- Camera with customized cursor -->
    <a-camera position="0 1.8 0" cursor-visible="true" cursor-scale="2" cursor-color="#4CC3D9" cursor-offset="2"
              cursor-maxdistance="100" cursor-opacity="0.5" cursor-fuse="true"></a-camera>
    <a-light color="#da47da" position="0 5 0" type="ambient"></a-light>
    <a-entity camera look-controls wasd-controls></a-entity>
    <a-entity light="type: point; color: #EEE; intensity: 0.5" position="0 3 0"></a-entity>

    <a-entity position="0 1 -3">
        <a-entity id="jenga" position="0 0.2 0"></a-entity>
        <a-box id='platform' width='2' depth='2' height='0.1' color='grey' static-body></a-box>
    </a-entity>

    <!-- Sky -->
    <a-sky color="#ecfcf4"></a-sky>
</a-scene>
<script>
    // fake data
    var data = [10, 20, 30, 15, 25, 35, 40,
        45, 50, 70, 100, 120, 130,
        12, 18, 22, 29, 33, 44, 59, 200];

    // we scale the height of our bars using d3's linear scale
    var hscale = d3.scaleLinear()
        .domain([0, d3.max(data)])
        .range([0, 3]);

    // we select the scene object just like an svg
    var scene = d3.select("#jenga");

    var dataset = [];  // 10, 9, 8...1
    for (var i = 10; i > 0; i--) {
        dataset.push(i);
    }

    // Create tower of spheres
    scene.selectAll('a-sphere')
        .data(dataset)
        .enter()
        .append('a-sphere')
        .attr('radius', '0.1')
        .attr('color', 'blue')
        .attr('position', function(d, i) {
            return '0 ' + (i * 0.2) + ' 0';
        })
        .attr('dynamic-body', '');

    // we use d3's enter/update/exit pattern to draw and bind our dom elements
    var bars = scene.selectAll("a-box")
        .data(data)
        .enter()
        .append("a-box")
        .attr("position", function (d, i) {
            return '0 ' + (i * 0.2) + ' 0';
        })
        .attr("width", 0.5)
        .attr("depth", 0.9)
        .attr("height", function (d) {
            return hscale(d)
        })
        .attr("opacity", function (d, i) {
            return 0.6 + (i / data.length) * 0.4
        });
</script>
</body>
</html>
