{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/constants.js","webpack:///./src/progressive-controls.js","webpack:///./src/button.js","webpack:///./src/text-panel.js","webpack:///./src/tutorial-step.js","webpack:///./src/tutorial.js","webpack:///./src/help.js","webpack:///./src/year-selector.js","webpack:///./src/selection-info.js","webpack:///./src/selection-handler.js","webpack:///./src/hover-handler.js","webpack:///./src/candidate-info.js","webpack:///./src/cartogram-renderer.js","webpack:///./src/election-data-loader.js","webpack:///./src/look-at.js","webpack:///./src/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","p","jsonpArray","window","oldJsonpFunction","bind","slice","THREE","AFRAME","DARK_GRAY","Color","REPUBLICAN_RED","DEMOCRAT_BLUE","LIBERTARIAN_GOLD","GREEN_PARTY_GREEN","INDEPENDENT_PURPLE","YEARS","updateMixin","mixin","attr","additions","stringify","utils","styleParser","extend","old","getAttribute","setAttribute","registerComponent","schema","maxLevel","default","oneOf","gazeMixin","pointMixin","touchMixin","override","objects","controllerModel","init","_this","this","levels","currentLevel","Map","controllerName","assets","el","sceneEl","querySelector","appendChild","document","createElement","gazeDefault","shRayConfig","colliderEvent","colliderEventProperty","colliderEndEvent","colliderEndEventProperty","colliderState","pointDefault","touchDefault","camera","parseFloat","version","caster","forEach","hand","ctrlrCompConfig","model","ctrlr","addEventListener","e","detectLevel","eventRepeaterB","eventRepeater","addEventListeners","set","update","oldData","objs","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","_ref","_ref2","_slicedToArray","level","setLevel","err","return","remove","eventsRegistered","canv","canvas","removeEventListener","newLevel","force","indexOf","currentHand","removeChild","gazeDefaultId","ctrlrName","ctrlrCfg","controllerConfig","pntMixin","raycaster","pointDefaultId","tchMixin","touchDefaultId","emit","evt","detail","component","type","startsWith","preventDefault","gearvr-controls","origin","x","y","z","oculus-touch-controls","direction","oculus-go-controls","windows-motion-controls","textColor","textWrapCount","buttonColor","borderColor","selectionColor","buttonHeight","buttonWidth","handleHoverStart","handleHoverEnd","handleStateChange","renderLayout","deepEqual","buttonBorder","button","setTimeout","components","haptics","pulse","primitive","height","width","registerPrimitive","defaultComponents","geometry","material","shader","color","opacity","text","align","wrapCount","mappings","textcolor","textalign","textwrapcount","textvalue","panelcolor","textopacity","dur","controllerTypes","triggerEvent","anchor","offset","handleTriggerEvent","stepEl","object3D","visible","fadeinProps","easing","from","to","startEvents","_extends","timeoutId","clearTimeout","handleAnimationComplete","show","hide","currentStep","superHands","handleControllerChange","tutorialSteps","querySelectorAll","handleNextStep","nextStepButton","handleStartTutorial","startTutorialButton","handleStopTutorial","stopTutorialButton","transition","prevStep","nextStep","progressiveControls","lvl","controllerType","device","checkHeadsetConnected","size","determineRelevantSteps","step","types","includes","hideHelp","helpEls","clearHelpEls","setupGazeHelp","target","setupRightPointerHelp","setupLeftPointerHelp","showHelp","createTextPanel","textPanel","controlsEl","clearPointerHelpEls","helpText","isMobile","gazeHelp","parentEl","clearGazeHelpEl","rightPointerHelpEl","right","leftPointerHelpEl","left","keys","key","_this2","_constants","dataLayer","selectedYear","createButtons","year","buttons","event","_this3","_this4","xPos","_d3Format","state","candidate","party","votes","electoralVotes","totalVotes","percentage","voteFormatter","format","totalVoteFormatter","percentageFormatter","getInfoText","selectionBox","Box3Helper","Box3","selectedObjWorldCenter","Vector3","setObject3D","stateBox","infoPanelAnchorPosition","infoPanel","infoPanelText","infoPanelHighlight","handleSelection","turnSelectionOff","targetEl","isAlreadySelected","isSelectable","setSelectionTo","selected","selectedObj","getObject3D","computeBoundingBox","showSelectionBoxFor","addState","showInfoPanel","getWorldPosition","boxCenter","worldToLocal","setFromCenterAndSize","boundingBox","getSize","box","selectionInfoComp","calculateInfoPanelAnchorPosition","position","copy","_selectionInfoComp$da","setFromObject","getCenter","setY","max","needsPositionUpdate","equals","tick","removeState","hoverable","is","constants","candidateInfo","Trump, Donald J.","firstName","lastName","Clinton, Hillary","Johnson, Gary","Stein, Jill","McMullin, Evan","Obama, Barack","Romney, Mitt","McCain, John","Nader, Ralph","Barr, Bob","Bush, George W.","Kerry, John F.","Badnarik, Michael","_d3Scale","_candidateInfo","dependencies","maxExtrudeHeight","geoProjectionComponent","system","systems","handleGeoDataReady","handleElectionDataReady","clearMap","render","electionDataLoadEvent","votesByFipsCode","maxTotalVoters","isReady","geoJson","extrudeScale","scaleLinear","domain","range","candidateMetadata","features","feature","votingData","id","stateShapes","renderToContext","projection","toShapes","zPosition","stateSelectionEntity","candidateData","totalVoters","info","_candidateInfo2","Geometry","candidateMetadatum","extrudeGeometry","featureGeometry","extrudeSettings","depth","bevelEnabled","stateShape","extrudedFeatureGeometry","ExtrudeGeometry","center","scale","translate","merge","createExtrudedAndScaledGeometryPerShape","createExtrudedAndScaledGeometry","candidateName","attributes","properties","getHexString","selectionMask","inputGeometry","selectionMaskGeometry","BufferGeometry","fromGeometry","mesh","Mesh","selectionMaskEntity","transparent","createSelectionMask","extrudeBufferGeometry","MeshLambertMaterial","extrudedMap","mapRenderContextForOutline","stateOutlineGeometry","stateOutlineVertices","toVertices","addAttribute","Float32BufferAttribute","stateOutlineMaterial","LineBasicMaterial","stateOutlines","LineSegments","clearAll","arguments","object3DMap","removeObject3D","maskEl","_maxvoters","handleDataLoaded","handleYearChanged","yearText","fetch","then","response","json","catch","error","console","reduce","accum","fips","_maxvoters2","debug","coordinates","warn","isCoordinates","isCoordinate","parse","_typeof","target3D","vector","wpVector","self","lookAt","hasLoaded","beginTracking","t","parent","subVectors","add"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \".bundle.js\"\n \t}\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([31,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","const { AFRAME } = window;\nconst { THREE } = AFRAME;\n\nexport const DARK_GRAY = new THREE.Color(0x56565a);\nexport const REPUBLICAN_RED = new THREE.Color(0xE91D0E);\nexport const DEMOCRAT_BLUE = new THREE.Color(0x232066);\nexport const LIBERTARIAN_GOLD = new THREE.Color(0xE5C601);\nexport const GREEN_PARTY_GREEN = new THREE.Color(0x00A95C);\nexport const INDEPENDENT_PURPLE = new THREE.Color(0x9400D3);\n\nexport const YEARS = ['2016', '2012', '2008', '2004'];\n","/* eslint-disable */\n// from https://github.com/wmurphyrd/aframe-super-hands-component\nimport 'aframe';\n\nconst { AFRAME } = window;\nconst gazeDefaultId = 'progressivecontrolsgazedefault'\nconst pointDefaultId = 'progressivecontrolspointdefault'\nconst touchDefaultId = 'progressivecontrolstouchdefault'\n\nAFRAME.registerComponent('progressive-controls', {\n    schema: {\n        maxLevel: { default: 'touch', oneOf: ['gaze', 'point', 'touch'] },\n        gazeMixin: { default: '' },\n        pointMixin: { default: '' },\n        touchMixin: { default: '' },\n        override: { default: false },\n        objects: { default: '' },\n        controllerModel: { default: true }\n    },\n    init: function () {\n        const rayEndProp = 'clearedEls'\n        this.levels = ['gaze', 'point', 'touch']\n        this.currentLevel = new Map()\n        this.controllerName = new Map()\n\n        // setup mixins for defaults\n        const assets = this.el.sceneEl.querySelector('a-assets') ||\n            this.el.sceneEl.appendChild(document.createElement('a-assets'))\n        const gazeDefault = this.gazeDefault = document.createElement('a-mixin')\n        const shRayConfig = AFRAME.utils.styleParser.stringify({\n            colliderEvent: 'raycaster-intersection',\n            colliderEventProperty: 'els',\n            colliderEndEvent: 'raycaster-intersection-cleared',\n            colliderEndEventProperty: rayEndProp,\n            colliderState: ''\n        })\n        gazeDefault.setAttribute('id', gazeDefaultId)\n        gazeDefault.setAttribute('geometry', 'primitive: ring;' +\n            'radiusOuter: 0.008; radiusInner: 0.005; segmentsTheta: 32')\n        gazeDefault.setAttribute('material', 'color: #000; shader: flat')\n        gazeDefault.setAttribute('position', '0 0 -0.5')\n        gazeDefault.setAttribute('raycaster', '')\n        gazeDefault.setAttribute('super-hands', shRayConfig)\n        const pointDefault = this.pointDefault = document.createElement('a-mixin')\n        pointDefault.setAttribute('id', pointDefaultId)\n        pointDefault.setAttribute('raycaster', 'showLine: true')\n        pointDefault.setAttribute('super-hands', shRayConfig)\n        const touchDefault = this.touchDefault = document.createElement('a-mixin')\n        touchDefault.setAttribute('id', touchDefaultId)\n        touchDefault.setAttribute('super-hands', '')\n        touchDefault.setAttribute('sphere-collider', '')\n        if (this.el.sceneEl.getAttribute('physics')) {\n            const physicsBodyDefault = 'shape: sphere; sphereRadius: 0.02'\n            pointDefault.setAttribute('static-body', physicsBodyDefault)\n            gazeDefault.setAttribute('static-body', physicsBodyDefault)\n            touchDefault.setAttribute('static-body', physicsBodyDefault)\n        }\n        assets.appendChild(gazeDefault)\n        assets.appendChild(pointDefault)\n        assets.appendChild(touchDefault)\n\n        this.camera = this.el.querySelector('a-camera,[camera]')\n        if (!this.camera) {\n            this.camera = this.el.appendChild(document.createElement('a-camera'))\n            // DEPRECATION path: camera y instead of userHeight in verions >= 0.8\n            if (parseFloat(AFRAME.version) > 0.7) {\n                this.camera.setAttribute('position', '0 1.6 0')\n            }\n        }\n        this.caster = this.camera.querySelector('.gazecaster') ||\n            this.camera.appendChild(document.createElement('a-entity'))\n        ;['left', 'right'].forEach(hand => {\n            // find controller by left-controller/right-controller class or create one\n            this[hand] = this.el.querySelector('.' + hand + '-controller') ||\n                this.el.appendChild(document.createElement('a-entity'))\n            const ctrlrCompConfig = {\n                    hand: hand,\n                    model: this.data.controllerModel\n                }\n            ;['daydream-controls', 'gearvr-controls', 'oculus-touch-controls',\n                'vive-controls', 'windows-motion-controls', 'oculus-go-controls']\n                .forEach(ctrlr => this[hand].setAttribute(ctrlr, ctrlrCompConfig))\n        })\n        this.el.addEventListener('controllerconnected', e => this.detectLevel(e))\n        this.eventRepeaterB = this.eventRepeater.bind(this)\n        // pass mouse and touch events into the scene\n        this.addEventListeners()\n        // default level\n        this.currentLevel.set('right', 0)\n    },\n    update: function (oldData) {\n        const objs = { objects: this.data.objects }\n        updateMixin(this.gazeDefault, 'raycaster', objs)\n        updateMixin(this.pointDefault, 'raycaster', objs)\n        updateMixin(this.touchDefault, 'sphere-collider', objs)\n        for (let [hand, level] of this.currentLevel) {\n            this.setLevel(level, hand, true)\n        }\n    },\n    remove: function () {\n        if (!this.eventsRegistered) {\n            return\n        }\n        const canv = this.el.sceneEl.canvas\n        canv.removeEventListener('mousedown', this.eventRepeaterB)\n        canv.removeEventListener('mouseup', this.eventRepeaterB)\n        canv.removeEventListener('touchstart', this.eventRepeaterB)\n        canv.removeEventListener('touchend', this.eventRepeaterB)\n    },\n    setLevel: function (newLevel, hand, force) {\n        hand = hand || 'right'\n        const maxLevel = this.levels.indexOf(this.data.maxLevel)\n        const currentHand = this[hand]\n        const override = this.data.override\n        newLevel = newLevel > maxLevel ? maxLevel : newLevel\n        if (newLevel === this.currentLevel.get(hand) && !force) {\n            return\n        }\n        if (newLevel !== 0 && this.caster) {\n            // avoids error where physics system tries to tick on removed entity\n            this.caster.setAttribute('mixin', '')\n            this.camera.removeChild(this.caster)\n            this.caster = null\n        }\n        switch (newLevel) {\n        case this.levels.indexOf('gaze'):\n            const gazeMixin = this.data.gazeMixin\n            this.caster.setAttribute(\n                'mixin',\n                (override && gazeMixin.length ? '' : gazeDefaultId + ' ') + gazeMixin\n            )\n            break\n        case this.levels.indexOf('point'):\n            const ctrlrName = this.controllerName.get(hand)\n            const ctrlrCfg = this.controllerConfig[ctrlrName]\n            const pntMixin = this.data.pointMixin\n            if (ctrlrCfg && ctrlrCfg.raycaster) {\n                currentHand.setAttribute('raycaster', ctrlrCfg.raycaster)\n            }\n            currentHand.setAttribute(\n                'mixin',\n                (override && pntMixin.length ? '' : pointDefaultId + ' ') + pntMixin\n            )\n            break\n        case this.levels.indexOf('touch'):\n            const tchMixin = this.data.touchMixin\n            currentHand.setAttribute(\n                'mixin',\n                (override && tchMixin.length ? '' : touchDefaultId + ' ') + tchMixin\n            )\n            break\n        }\n        this.currentLevel.set(hand, newLevel)\n        this.el.emit('controller-progressed', {\n            level: this.levels[newLevel],\n            hand: hand\n        })\n    },\n    detectLevel: function (evt) {\n        const DOF6 = ['vive-controls', 'oculus-touch-controls',\n            'windows-motion-controls']\n        const DOF3 = ['gearvr-controls', 'daydream-controls', 'oculus-go-controls']\n        const hand = evt.detail.component.data.hand || 'right'\n        this.controllerName.set(hand, evt.detail.name)\n        if (DOF6.indexOf(evt.detail.name) !== -1) {\n            this.setLevel(this.levels.indexOf('touch'), hand)\n        } else if (DOF3.indexOf(evt.detail.name) !== -1) {\n            this.setLevel(this.levels.indexOf('point'), hand)\n        }\n    },\n    eventRepeater: function (evt) {\n        if (!this.caster) {\n            return\n        } // only for gaze mode\n        if (evt.type.startsWith('touch')) {\n            evt.preventDefault()\n            // avoid repeating touchmove because it interferes with look-controls\n            if (evt.type === 'touchmove') {\n                return\n            }\n        }\n        this.caster.emit(evt.type, evt.detail)\n    },\n    addEventListeners: function () {\n        if (!this.el.sceneEl.canvas) {\n            this.el.sceneEl\n                .addEventListener('loaded', this.addEventListeners.bind(this))\n            return\n        }\n        this.el.sceneEl.canvas.addEventListener('mousedown', this.eventRepeaterB)\n        this.el.sceneEl.canvas.addEventListener('mouseup', this.eventRepeaterB)\n        this.el.sceneEl.canvas.addEventListener('touchstart', this.eventRepeaterB)\n        this.el.sceneEl.canvas.addEventListener('touchmove', this.eventRepeaterB)\n        this.el.sceneEl.canvas.addEventListener('touchend', this.eventRepeaterB)\n        this.eventsRegistered = true\n    },\n    controllerConfig: {\n        'gearvr-controls': {\n            raycaster: { origin: { x: 0, y: 0.0005, z: 0 } }\n        },\n        'oculus-touch-controls': {\n            raycaster: { origin: { x: 0.001, y: 0, z: 0.065 }, direction: { x: 0, y: -0.8, z: -1 } }\n        },\n        'oculus-go-controls': {\n            raycaster: { origin: { x: 0, y: 0.0005, z: 0 } }\n        },\n        'windows-motion-controls': {\n            raycaster: { direction: { x: 0, y: -0.4472, z: -0.8944 } }\n        }\n    }\n})\n\nfunction updateMixin(mixin, attr, additions) {\n    const stringify = AFRAME.utils.styleParser.stringify\n    const extend = AFRAME.utils.extend\n    const old = mixin.getAttribute(attr)\n    if (old) {\n        mixin.setAttribute(attr, stringify(extend(old, additions)))\n    }\n}\n","import 'aframe';\n\nconst { AFRAME } = window;\n\n/**\n * Displays a selectable button for each year\n */\nAFRAME.registerComponent('button', {\n    schema: {\n        value: {\n            type: 'string'\n        },\n        textColor: {\n            type: 'color',\n            default: '#000000'\n        },\n        textWrapCount: {\n            default: 4\n        },\n        buttonColor: {\n            type: 'color',\n            default: '#FFFFFF'\n        },\n        borderColor: {\n            type: 'color',\n            default: '#000000'\n        },\n        selectionColor: {\n            type: 'color',\n            default: '#E5C601'\n        },\n        buttonHeight: {\n            default: 0.25\n        },\n        buttonWidth: {\n            default: 0.5\n        }\n    },\n\n    init() {\n        this.handleHoverStart = this.handleHoverStart.bind(this);\n        this.handleHoverEnd = this.handleHoverEnd.bind(this);\n        this.handleStateChange = this.handleStateChange.bind(this);\n        this.renderLayout();\n    },\n\n    update(oldData) {\n        if (!AFRAME.utils.deepEqual(oldData, this.data)) {\n            this.renderLayout();\n        }\n    },\n\n    remove() {\n        this.buttonBorder.removeEventListener('hover-start', this.handleHoverStart);\n        this.buttonBorder.removeEventListener('hover-end', this.handleHoverEnd);\n        this.button.removeEventListener('stateadded', this.handleStateChange);\n    },\n\n    handleStateChange(evt) {\n        if (evt.detail === 'clicked') {\n            this.button.setAttribute('material', 'color', this.data.selectionColor);\n            this.el.emit('clicked');\n            window.setTimeout(() => {\n                this.button.setAttribute('material', 'color', this.data.buttonColor);\n            }, 100);\n        }\n    },\n\n    handleHoverStart(evt) {\n        this.buttonBorder.setAttribute('material', 'color', this.data.selectionColor);\n        if (evt.detail.hand.components.haptics) {\n            evt.detail.hand.components.haptics.pulse(0.2, 10);\n        }\n    },\n\n    handleHoverEnd() {\n        this.buttonBorder.setAttribute('material', 'color', this.data.borderColor);\n    },\n\n    renderLayout() {\n        if (!this.button) {\n            this.button = document.createElement('a-entity');\n            this.button.setAttribute('class', 'selectable button');\n            this.button.setAttribute('clickable', {});\n            this.button.setAttribute('onclick', 'this.emit(\"grab-start\", {}); this.emit(\"grab-end\", {});');\n            this.button.addEventListener('stateadded', this.handleStateChange);\n            this.button.setAttribute('material', 'shader', 'flat');\n            this.button.setAttribute('text', 'align', 'center');\n            this.el.appendChild(this.button);\n        }\n        this.button.setAttribute('geometry', { primitive: 'plane', height: this.data.buttonHeight, width: this.data.buttonWidth });\n        this.button.setAttribute('material', 'color', this.data.buttonColor);\n        this.button.setAttribute('text', 'value', this.data.value);\n        this.button.setAttribute('text', 'color', this.data.textColor);\n        this.button.setAttribute('text', 'wrapCount', this.data.textWrapCount);\n\n        if (!this.buttonBorder) {\n            this.buttonBorder = document.createElement('a-plane');\n            this.buttonBorder.setAttribute('class', 'border');\n            this.buttonBorder.setAttribute('hoverable', {});\n            this.buttonBorder.setAttribute('position', '0 0 -0.005');\n            this.buttonBorder.setAttribute('material', 'shader', 'flat');\n            this.buttonBorder.addEventListener('hover-start', this.handleHoverStart);\n            this.buttonBorder.addEventListener('hover-end', this.handleHoverEnd);\n            this.button.appendChild(this.buttonBorder);\n        }\n        const scaleFactor = 0.16;\n        this.buttonBorder.setAttribute('height', this.data.buttonHeight * (1 + scaleFactor));\n        this.buttonBorder.setAttribute('width', this.data.buttonWidth * (1 + (scaleFactor / 2)));\n        this.buttonBorder.setAttribute('material', 'color', this.data.borderColor);\n    }\n});\n","import 'aframe';\n\nconst { AFRAME } = window;\n\nAFRAME.registerPrimitive('a-text-panel', {\n    defaultComponents: {\n        geometry: {\n            primitive: 'plane',\n            width: 0.5,\n            height: 'auto'\n        },\n        material: {\n            shader: 'flat',\n            color: 'black',\n            opacity: 1\n        },\n        text: {\n            color: 'white',\n            align: 'left',\n            wrapCount: 20\n        }\n    },\n\n    mappings: {\n        primitive: 'geometry.primitive',\n        width: 'geometry.width',\n        textcolor: 'text.color',\n        textalign: 'text.align',\n        textwrapcount: 'text.wrapCount',\n        textvalue: 'text.value',\n        panelcolor: 'material.color',\n        opacity: 'material.opacity',\n        textopacity: 'text.opacity'\n    }\n});\n","import 'aframe';\n\nconst { AFRAME } = window;\n\nAFRAME.registerComponent('tutorial-step', {\n    schema: {\n        dur: {\n            type: 'number'\n        },\n        controllerTypes: {\n            type: 'array'\n        },\n        triggerEvent: {\n            type: 'string'\n        },\n        anchor: {\n            type: 'selector',\n            default: 'a-camera'\n        },\n        offset: {\n            type: 'vec3',\n            default: { x: 0, y: 0, z: -1 }\n        },\n        textvalue: {\n            type: 'string'\n        }\n    },\n\n    init() {\n        this.handleTriggerEvent = this.handleTriggerEvent.bind(this);\n        this.stepEl = document.createElement('a-text-panel');\n        this.stepEl.object3D.visible = false;\n        this.stepEl.setAttribute('opacity', 0);\n        this.stepEl.setAttribute('textopacity', 0);\n        const fadeinProps = {\n            dur: 400,\n            easing: 'linear',\n            from: 0,\n            to: 1,\n            startEvents: 'show-step'\n        };\n        this.stepEl.setAttribute('animation__fadein_panel', { property: 'opacity', ...fadeinProps });\n        this.stepEl.setAttribute('animation__fadein_text', { property: 'textopacity', ...fadeinProps });\n    },\n\n    handleTriggerEvent() {\n        this.el.emit('next-step');\n    },\n\n    update(oldData) {\n        if (this.timeoutId) {\n            window.clearTimeout(this.timeoutId);\n        }\n        this.stepEl.setAttribute('textvalue', this.data.textvalue);\n        this.stepEl.setAttribute('position', this.data.offset);\n        if (this.data.anchor !== oldData.anchor) {\n            if (oldData.anchor) {\n                oldData.anchor.removeChild(this.stepEl);\n            }\n            this.data.anchor.appendChild(this.stepEl);\n        }\n    },\n\n    remove() {\n        this.data.anchor.removeChild(this.stepEl);\n        this.stepEl.removeEventListener('animationcomplete', this.handleAnimationComplete);\n    },\n\n    show() {\n        this.stepEl.object3D.visible = true;\n        this.stepEl.setAttribute('opacity', 0);\n        this.stepEl.setAttribute('textopacity', 0);\n        if (this.data.triggerEvent) {\n            this.el.sceneEl.addEventListener(this.data.triggerEvent, this.handleTriggerEvent);\n        }\n\n        this.stepEl.emit('show-step');\n        if (this.data.dur && !this.timeoutId) {\n            this.timeoutId = window.setTimeout(() => {\n                this.timeoutId = null;\n                this.el.emit('next-step');\n            }, this.data.dur);\n        }\n    },\n\n    hide() {\n        if (this.timeoutId) {\n            window.clearTimeout(this.timeoutId);\n            this.timeoutId = null;\n        }\n        if (this.data.triggerEvent) {\n            this.el.sceneEl.removeEventListener(this.data.triggerEvent, this.handleTriggerEvent);\n        }\n        this.stepEl.object3D.visible = false;\n    }\n});\n","import 'aframe';\n\nconst { AFRAME } = window;\n\nAFRAME.registerComponent('tutorial', {\n    schema: {\n        currentStep: {\n            type: 'number',\n            default: -1\n        }\n    },\n\n    init() {\n        this.superHands = document.querySelector('[progressive-controls]');\n        this.handleControllerChange = this.handleControllerChange.bind(this);\n        this.superHands.addEventListener('controller-progressed', this.handleControllerChange);\n        this.tutorialSteps = this.el.querySelectorAll('[tutorial-step]');\n\n        this.handleNextStep = this.handleNextStep.bind(this);\n        this.el.addEventListener('next-step', this.handleNextStep);\n        this.nextStepButton = document.querySelector('#next-tutorial-step');\n        this.nextStepButton.addEventListener('clicked', this.handleNextStep);\n\n        this.handleStartTutorial = this.handleStartTutorial.bind(this);\n        this.startTutorialButton = document.querySelector('#start-tutorial');\n        this.startTutorialButton.addEventListener('clicked', this.handleStartTutorial);\n\n        this.handleStopTutorial = this.handleStopTutorial.bind(this);\n        this.stopTutorialButton = document.querySelector('#stop-tutorial');\n        this.stopTutorialButton.addEventListener('clicked', this.handleStopTutorial);\n\n        this.handleControllerChange();\n    },\n\n    remove() {\n        this.el.sceneEl.removeEventListener('target-selected', this.handleNextStep);\n        this.el.removeEventListener('next-step', this.handleNextStep);\n        this.nextStepButton.removeEventListener('clicked', this.handleNextStep);\n        this.startTutorialButton.removeEventListener('clicked', this.handleStartTutorial);\n        this.stopTutorialButton.removeEventListener('clicked', this.handleStopTutorial);\n    },\n\n    update(oldData) {\n        if (this.data.currentStep !== oldData.currentStep) {\n            this.transition(oldData.currentStep, this.data.currentStep);\n        }\n    },\n\n    transition(prevStep, nextStep) {\n        if (prevStep !== undefined && prevStep >= 0 && this.tutorialSteps[prevStep]) {\n            this.tutorialSteps[prevStep].components['tutorial-step'].hide();\n        }\n        if (nextStep < this.tutorialSteps.length && this.tutorialSteps[nextStep]) {\n            this.tutorialSteps[nextStep].components['tutorial-step'].show();\n        }\n        if (!this.tutorialSteps[nextStep]) {\n            this.handleStopTutorial();\n        }\n    },\n\n    handleStartTutorial() {\n        this.startTutorialButton.setAttribute('visible', false);\n        this.nextStepButton.setAttribute('visible', true);\n        this.stopTutorialButton.setAttribute('visible', true);\n        this.el.setAttribute('tutorial', 'currentStep', 0);\n    },\n\n    handleStopTutorial() {\n        this.startTutorialButton.setAttribute('visible', true);\n        this.nextStepButton.setAttribute('visible', false);\n        this.stopTutorialButton.setAttribute('visible', false);\n        this.el.setAttribute('tutorial', 'currentStep', -1);\n    },\n\n    handleControllerChange() {\n        // gaze, desktop, single point, multipointer\n        const progressiveControls = this.superHands.components['progressive-controls'];\n        const lvl = progressiveControls.currentLevel.get('right');\n        const level = progressiveControls.levels[lvl];\n        let controllerType = '';\n        if (level === 'gaze') {\n            if (!AFRAME.utils.device.checkHeadsetConnected()) {\n                controllerType = 'desktop';\n            } else {\n                controllerType = 'gaze';\n            }\n        } else if (progressiveControls.currentLevel.size === 1) {\n            controllerType = 'singlePointer';\n        } else {\n            controllerType = 'doublePointer';\n        }\n        this.determineRelevantSteps(controllerType);\n    },\n\n    determineRelevantSteps(controllerType) {\n        const tutorialSteps = this.el.querySelectorAll('[tutorial-step]');\n        this.tutorialSteps = [];\n        for (let i = 0; i < tutorialSteps.length; i += 1) {\n            const step = tutorialSteps[i];\n            const types = step.getAttribute('tutorial-step').controllerTypes;\n            if (types.length === 0 || types.includes(controllerType)) {\n                this.tutorialSteps.push(step);\n            }\n        }\n    },\n\n    handleNextStep() {\n        let nextStep = (this.data.currentStep + 1);\n        if (nextStep > this.tutorialSteps.length) {\n            nextStep = -1;\n        }\n        this.el.setAttribute('tutorial', 'currentStep', nextStep);\n    }\n});\n","import 'aframe';\n\nconst { AFRAME } = window;\n\nAFRAME.registerComponent('help', {\n    init() {\n        this.superHands = document.querySelector('[progressive-controls]');\n        this.handleControllerChange = this.handleControllerChange.bind(this);\n        this.superHands.addEventListener('controller-progressed', this.handleControllerChange);\n        this.hideHelp = this.hideHelp.bind(this);\n        this.el.sceneEl.addEventListener('year-changed', this.hideHelp);\n        this.el.sceneEl.addEventListener('target-selected', this.hideHelp);\n        this.helpEls = {};\n    },\n\n    remove() {\n        this.superHands.removeEventListener('controller-progressed', this.handleControllerChange);\n        this.el.sceneEl.removeEventListener('year-changed', this.hideHelp);\n        this.el.sceneEl.removeEventListener('target-selected', this.hideHelp);\n        this.clearHelpEls();\n    },\n\n    handleControllerChange(evt) {\n        if (evt.detail.level === 'gaze') {\n            this.setupGazeHelp(evt.target);\n        } else if (evt.detail.hand === 'right') {\n            this.setupRightPointerHelp(evt.target);\n        } else {\n            this.setupLeftPointerHelp(evt.target);\n        }\n        this.showHelp();\n    },\n\n    createTextPanel(text) {\n        const textPanel = document.createElement('a-entity');\n        textPanel.setAttribute('geometry', { primitive: 'plane', height: 'auto' });\n        textPanel.setAttribute('material', 'shader', 'flat');\n        textPanel.setAttribute('material', 'color', 'white');\n        textPanel.setAttribute('material', 'opacity', '0.75');\n        textPanel.setAttribute('text', 'color', 'black');\n        // textPanel.setAttribute('text', 'zOffset', '0.01');\n        textPanel.setAttribute('text', 'value', text);\n        return textPanel;\n    },\n\n    setupGazeHelp(controlsEl) {\n        this.clearPointerHelpEls();\n        let helpText = 'Gaze at something for 1 second to select it.';\n        if (!AFRAME.utils.device.isMobile()) {\n            helpText += '\\nUse the w-a-s-d keys to move around.';\n        }\n        const gazeHelp = this.createTextPanel(helpText);\n        gazeHelp.setAttribute('text', 'wrapCount', '15');\n        gazeHelp.setAttribute('geometry', 'width', '0.5');\n        gazeHelp.setAttribute('text', 'align', 'center');\n        gazeHelp.setAttribute('position', '0.3 0 -2');\n        const gazeEl = controlsEl.components['progressive-controls'].caster;\n        gazeEl.parentEl.appendChild(gazeHelp);\n        this.helpEls.gazeHelp = gazeHelp;\n    },\n\n    setupRightPointerHelp(controlsEl) {\n        this.clearGazeHelpEl();\n        const helpText = `To select something, point the laser at it and pull the trigger button.\\n\n        To move the map, point the laser at it, hold down the grip buttons, and move the controller.`;\n        const rightPointerHelpEl = this.createTextPanel(helpText);\n        rightPointerHelpEl.setAttribute('geometry', 'width', '0.18');\n        rightPointerHelpEl.setAttribute('text', 'wrapCount', '20');\n        rightPointerHelpEl.setAttribute('text', 'align', 'left');\n        rightPointerHelpEl.setAttribute('position', '0.15 0 0.05');\n        rightPointerHelpEl.setAttribute('rotation', '-90 0 0');\n        const rightPointer = controlsEl.components['progressive-controls'].right;\n        rightPointer.appendChild(rightPointerHelpEl);\n        this.helpEls.rightPointerHelpEl = rightPointerHelpEl;\n    },\n\n    setupLeftPointerHelp(controlsEl) {\n        this.clearGazeHelpEl();\n        /* eslint-disable max-len */\n        const helpText = `To resize the map, point both the lasers at the map, hold down both triggers, and move the controllers apart or together.\\n\n        To resize and move the map at the same time, point both the lasers at the map, hold down the grip buttons on both controllers, and move the controllers around.`;\n        /* eslint-enable max-len */\n        const leftPointerHelpEl = this.createTextPanel(helpText);\n        leftPointerHelpEl.setAttribute('geometry', 'width', '0.18');\n        leftPointerHelpEl.setAttribute('text', 'wrapCount', '20');\n        leftPointerHelpEl.setAttribute('text', 'align', 'left');\n        leftPointerHelpEl.setAttribute('position', '-0.15 0 0.05');\n        leftPointerHelpEl.setAttribute('rotation', '-90 0 0');\n        const leftPointer = controlsEl.components['progressive-controls'].left;\n        leftPointer.appendChild(leftPointerHelpEl);\n        this.helpEls.leftPointerHelpEl = leftPointerHelpEl;\n    },\n\n    showHelp() {\n        Object.keys(this.helpEls).forEach((key) => {\n            const helpEl = this.helpEls[key];\n            helpEl.setAttribute('visible', true);\n        });\n    },\n\n    hideHelp() {\n        Object.keys(this.helpEls).forEach((key) => {\n            const helpEl = this.helpEls[key];\n            helpEl.setAttribute('visible', false);\n        });\n    },\n\n    clearGazeHelpEl() {\n        if (this.helpEls.gazeHelp) {\n            this.helpEls.gazeHelp.parentEl.removeChild(this.helpEls.gazeHelp);\n            delete this.helpEls.gazeHelp;\n        }\n    },\n\n    clearPointerHelpEls() {\n        if (this.helpEls.rightPointerHelpEl) {\n            this.helpEls.rightPointerHelpEl.parentEl.removeChild(this.helpEls.rightPointerHelpEl);\n            delete this.helpEls.rightPointerHelpEl;\n        }\n        if (this.helpEls.leftPointerHelpEl) {\n            this.helpEls.leftPointerHelpEl.parentEl.removeChild(this.helpEls.leftPointerHelpEl);\n            delete this.helpEls.leftPointerHelpEl;\n        }\n    },\n\n    clearHelpEls() {\n        this.clearGazeHelpEl();\n        this.clearPointerHelpEls();\n    }\n});\n","import 'aframe';\nimport { YEARS } from './constants';\n\nconst { AFRAME } = window;\n\n// For Google Tag Manager custom events\nwindow.dataLayer = window.dataLayer || [];\n\n/**\n * Displays a selectable button for each year\n */\nAFRAME.registerComponent('year-selector', {\n    schema: {\n        selectedYear: {\n            type: 'string'\n        },\n        selectionColor: {\n            type: 'color',\n            default: '#E5C601'\n        }\n    },\n\n    init() {\n        this.handleHoverStart = this.handleHoverStart.bind(this);\n        this.handleHoverEnd = this.handleHoverEnd.bind(this);\n        this.handleStateChange = this.handleStateChange.bind(this);\n        this.createButtons();\n    },\n\n    update(oldData) {\n        if (this.data.selectedYear !== oldData.selectedYear || this.data.selectionColor !== oldData.selectionColor) {\n            YEARS.forEach((year) => {\n                const button = this.buttons[year];\n                if (year === this.data.selectedYear) {\n                    button.setAttribute('material', 'color', this.data.selectionColor);\n                } else {\n                    button.setAttribute('material', 'color', '#FFFFFF');\n                }\n            });\n        }\n        if (this.data.selectedYear !== oldData.selectedYear) {\n            this.el.emit('year-changed', { year: this.data.selectedYear }, true);\n            window.dataLayer.push({\n                event: 'year-changed',\n                year: this.data.selectedYear\n            });\n        }\n    },\n\n    remove() {\n        YEARS.forEach((year) => {\n            const button = this.buttons[year];\n            const buttonBorder = button.querySelector('.border');\n            buttonBorder.removeEventListener('hover-start', this.handleHoverStart);\n            buttonBorder.removeEventListener('hover-end', this.handleHoverEnd);\n        });\n    },\n\n    handleStateChange(evt) {\n        if (evt.detail === 'clicked') {\n            YEARS.forEach((year) => {\n                const button = this.buttons[year];\n                if (button === evt.target) {\n                    button.setAttribute('material', 'color', this.data.selectionColor);\n                    this.el.setAttribute('year-selector', 'selectedYear', year);\n                } else {\n                    button.setAttribute('material', 'color', '#FFFFFF');\n                }\n            });\n        }\n    },\n\n    handleHoverStart(evt) {\n        const buttonBorder = evt.target;\n        buttonBorder.setAttribute('material', 'color', this.data.selectionColor);\n        if (evt.detail.hand.components.haptics) {\n            evt.detail.hand.components.haptics.pulse(0.2, 10);\n        }\n    },\n\n    handleHoverEnd(evt) {\n        const buttonBorder = evt.target;\n        buttonBorder.setAttribute('material', 'color', 'black');\n    },\n\n    createButtons() {\n        let xPos = 0;\n        const buttonWidth = 0.5;\n        this.buttons = {};\n        YEARS.forEach((year) => {\n            const button = document.createElement('a-entity');\n            button.setAttribute('geometry', { primitive: 'plane', height: 0.25, width: buttonWidth });\n            button.setAttribute('class', 'selectable');\n            button.setAttribute('clickable', {});\n            button.setAttribute('onclick', 'this.emit(\"grab-start\", {}); this.emit(\"grab-end\", {});');\n            button.addEventListener('stateadded', this.handleStateChange);\n            button.setAttribute('position', `${xPos} 0 0`);\n            button.setAttribute('material', 'shader', 'flat');\n            button.setAttribute('material', 'color', '#FFFFFF');\n            button.setAttribute('text', 'value', year);\n            button.setAttribute('text', 'color', 'black');\n            button.setAttribute('text', 'wrapCount', '4');\n            button.setAttribute('text', 'align', 'center');\n            button.setAttribute('text', 'zOffset', '0.05');\n\n            const buttonBorder = document.createElement('a-plane');\n            buttonBorder.setAttribute('class', 'border');\n            buttonBorder.setAttribute('hoverable', {});\n            buttonBorder.setAttribute('position', '0 0 -0.005');\n            buttonBorder.setAttribute('material', 'shader', 'flat');\n            buttonBorder.setAttribute('material', 'color', 'black');\n            buttonBorder.setAttribute('height', 0.29);\n            buttonBorder.setAttribute('width', buttonWidth + 0.04);\n            buttonBorder.addEventListener('hover-start', this.handleHoverStart);\n            buttonBorder.addEventListener('hover-end', this.handleHoverEnd);\n\n            button.appendChild(buttonBorder);\n\n            this.buttons[year] = button;\n            this.el.appendChild(button);\n            xPos += (buttonWidth + (buttonWidth * 0.1));\n        });\n    }\n});\n","import 'aframe';\nimport { format } from 'd3-format';\n\nconst { AFRAME } = window;\n\nAFRAME.registerComponent('selection-info', {\n    schema: {\n        state: {\n            type: 'string'\n        },\n        candidate: {\n            type: 'string'\n        },\n        party: {\n            type: 'string'\n        },\n        votes: {\n            type: 'number'\n        },\n        electoralVotes: {\n            type: 'number'\n        },\n        totalVotes: {\n            type: 'number'\n        },\n        percentage: {\n            type: 'number'\n        },\n        color: {\n            type: 'color'\n        }\n    },\n\n    init() {\n        this.voteFormatter = format(',');\n        this.totalVoteFormatter = format('.3s');\n        this.percentageFormatter = format('.3p');\n    },\n\n    getInfoText() {\n        return `${this.data.state}\n            ${this.data.candidate} (${this.data.party})\n            ${this.data.electoralVotes} electoral votes\n            ${this.voteFormatter(this.data.votes)} votes\n            ${this.percentageFormatter(this.data.percentage)} of ${this.totalVoteFormatter(this.data.totalVotes)} total`;\n    }\n});\n","import 'aframe';\n\nconst { AFRAME } = window;\nconst { THREE } = AFRAME;\n\n// For Google Tag Manager custom events\nwindow.dataLayer = window.dataLayer || [];\n\n/**\n * Responds to a selection event on part of the map.\n */\nAFRAME.registerComponent('selection-handler', {\n    init() {\n        this.selectionBox = new THREE.Box3Helper(new THREE.Box3(), 'black');\n        this.selectedObjWorldCenter = new THREE.Vector3();\n        this.selectionBox.visible = false;\n        this.el.setObject3D('selectionBox', this.selectionBox);\n\n        this.stateBox = new THREE.Box3();\n        this.infoPanelAnchorPosition = new THREE.Vector3();\n\n        this.infoPanel = document.querySelector('#info-panel');\n        this.infoPanelText = document.querySelector('#info-panel-text');\n        this.infoPanelHighlight = document.querySelector('#info-panel-highlight');\n\n        this.superHands = document.querySelector('[progressive-controls]');\n        this.handleControllerChange = this.handleControllerChange.bind(this);\n        this.superHands.addEventListener('controller-progressed', this.handleControllerChange);\n\n        this.handleSelection = this.handleSelection.bind(this);\n        this.turnSelectionOff = this.turnSelectionOff.bind(this);\n        this.el.sceneEl.addEventListener('year-changed', this.turnSelectionOff);\n        this.handleControllerChange();\n    },\n\n    handleControllerChange() {\n        const progressiveControls = this.superHands.components['progressive-controls'];\n        const lvl = progressiveControls.currentLevel.get('right');\n        const level = progressiveControls.levels[lvl];\n        if (level === 'gaze') {\n            this.el.removeEventListener('grab-end', this.handleSelection);\n            this.el.addEventListener('click', this.handleSelection);\n        } else {\n            this.el.removeEventListener('click', this.handleSelection);\n            this.el.addEventListener('grab-end', this.handleSelection);\n        }\n    },\n\n    remove() {\n        this.el.removeEventListener('click', this.handleSelection);\n        this.el.removeEventListener('grab-end', this.handleSelection);\n        this.superHands.removeEventListener('controller-progressed', this.handleControllerChange);\n        this.el.sceneEl.removeEventListener('year-changed', this.turnSelectionOff);\n    },\n\n    handleSelection(evt) {\n        const targetEl = evt.target;\n        this.el.emit('target-selected', { targetEl }, true);\n        if (this.isAlreadySelected(targetEl)) {\n            this.turnSelectionOff();\n        } else if (this.isSelectable(targetEl)) {\n            this.setSelectionTo(targetEl);\n        }\n    },\n\n    isAlreadySelected(targetEl) {\n        return (targetEl === this.selected);\n    },\n\n    isSelectable(targetEl) {\n        return !!(targetEl.components['selection-info']);\n    },\n\n    setSelectionTo(targetEl) {\n        if (this.selected) {\n            this.turnSelectionOff();\n        }\n        this.selected = targetEl;\n        const selectedObj = this.selected.getObject3D('mesh');\n        selectedObj.geometry.computeBoundingBox();\n        this.showSelectionBoxFor(selectedObj);\n        this.selected.setAttribute('scale', '1.05 1.05 1.01');\n        this.selected.setAttribute('material', 'visible', true);\n        this.selected.addState('selected');\n        this.showInfoPanel(selectedObj);\n    },\n\n    showSelectionBoxFor(selectedObj) {\n        selectedObj.getWorldPosition(this.selectedObjWorldCenter);\n        const boxCenter = this.el.object3D.worldToLocal(this.selectedObjWorldCenter);\n\n        const selectionBox = new THREE.Box3();\n        selectionBox.setFromCenterAndSize(boxCenter, selectedObj.geometry.boundingBox.getSize(new THREE.Vector3()));\n\n        this.selectionBox.box = selectionBox;\n        this.selectionBox.visible = true;\n    },\n\n    showInfoPanel() {\n        const selectionInfoComp = this.selected.components['selection-info'];\n        this.infoPanelText.setAttribute('value', selectionInfoComp.getInfoText());\n\n        this.calculateInfoPanelAnchorPosition();\n        this.infoPanel.object3D.position.copy(this.infoPanelAnchorPosition);\n\n        this.infoPanelHighlight.setAttribute('color', `#${selectionInfoComp.data.color}`);\n\n        this.infoPanel.object3D.visible = true;\n\n        const { state, candidate } = selectionInfoComp.data;\n\n        window.dataLayer.push({\n            event: 'data-selected',\n            state,\n            candidate\n        });\n    },\n\n    calculateInfoPanelAnchorPosition() {\n        this.stateBox.setFromObject(this.selected.parentEl.object3D);\n        this.stateBox.getCenter(this.infoPanelAnchorPosition);\n        this.infoPanelAnchorPosition.setY(this.stateBox.max.y + 0.75);\n    },\n\n    needsPositionUpdate() {\n        return !(this.infoPanel.object3D.position.equals(this.infoPanelAnchorPosition));\n    },\n\n    tick() {\n        if (this.selected) {\n            this.calculateInfoPanelAnchorPosition();\n            if (this.needsPositionUpdate()) {\n                this.infoPanel.object3D.position.copy(this.infoPanelAnchorPosition);\n            }\n        }\n    },\n\n    turnSelectionOff() {\n        this.infoPanel.object3D.visible = false;\n        this.selectionBox.visible = false;\n        if (this.selected) {\n            this.selected.setAttribute('scale', '1 1 1');\n            this.selected.setAttribute('material', 'visible', false);\n            this.selected.removeState('selected');\n            this.selected = null;\n        }\n    }\n});\n","import 'aframe';\n\nconst { AFRAME } = window;\n\n/**\n * Responds to the pointer hovering over a 'hoverable' part of the map.\n */\nAFRAME.registerComponent('hover-handler', {\n    init() {\n        this.handleHoverStart = this.handleHoverStart.bind(this);\n        this.el.addEventListener('hover-start', this.handleHoverStart);\n        this.handleHoverEnd = this.handleHoverEnd.bind(this);\n        this.el.addEventListener('hover-end', this.handleHoverEnd);\n        this.el.sceneEl.addEventListener('year-changed', this.handleHoverEnd);\n    },\n\n    remove() {\n        this.el.removeEventListener('hover-start', this.handleHoverStart);\n        this.el.removeEventListener('hover-end', this.handleHoverEnd);\n        this.el.sceneEl.removeEventListener('year-changed', this.handleHoverEnd);\n    },\n\n    handleHoverStart(evt) {\n        this.selected = evt.target;\n        if (this.selected.components.hoverable) {\n            this.selected.setAttribute('scale', '1.05 1.05 1.01');\n            this.selected.setAttribute('material', 'visible', true);\n            if (evt.detail.hand.components.haptics) {\n                evt.detail.hand.components.haptics.pulse(0.2, 10);\n            }\n        }\n    },\n\n    handleHoverEnd() {\n        if (this.selected && !this.selected.is('selected')) {\n            this.selected.setAttribute('scale', '1 1 1');\n            this.selected.setAttribute('material', 'visible', false);\n        }\n    }\n});\n","import * as constants from './constants';\n\nconst candidateInfo = {\n    'Trump, Donald J.': {\n        firstName: 'Donald J.',\n        lastName: 'Trump',\n        party: 'R',\n        color: constants.REPUBLICAN_RED\n    },\n    'Clinton, Hillary': {\n        firstName: 'Hillary',\n        lastName: 'Clinton',\n        party: 'D',\n        color: constants.DEMOCRAT_BLUE\n    },\n    'Johnson, Gary': {\n        firstName: 'Gary',\n        lastName: 'Johnson',\n        party: 'LIB',\n        color: constants.LIBERTARIAN_GOLD\n    },\n    'Stein, Jill': {\n        firstName: 'Jill',\n        lastName: 'Stein',\n        party: 'GRE',\n        color: constants.GREEN_PARTY_GREEN\n    },\n    'McMullin, Evan': {\n        firstName: 'Evan',\n        lastName: 'McMullin',\n        party: 'IND',\n        color: constants.INDEPENDENT_PURPLE\n    },\n    'Obama, Barack': {\n        firstName: 'Barak',\n        lastName: 'Obama',\n        party: 'D',\n        color: constants.DEMOCRAT_BLUE\n    },\n    'Romney, Mitt': {\n        firstName: 'Mitt',\n        lastName: 'Romney',\n        party: 'R',\n        color: constants.REPUBLICAN_RED\n    },\n    'McCain, John': {\n        firstName: 'John',\n        lastName: 'McCain',\n        party: 'R',\n        color: constants.REPUBLICAN_RED\n    },\n    'Nader, Ralph': {\n        firstName: 'Ralph',\n        lastName: 'Nader',\n        party: 'IND',\n        color: constants.INDEPENDENT_PURPLE\n    },\n    'Barr, Bob': {\n        firstName: 'Bob',\n        lastName: 'Barr',\n        party: 'LIB',\n        color: constants.LIBERTARIAN_GOLD\n    },\n    'Bush, George W.': {\n        firstName: 'George W.',\n        lastName: 'Bush',\n        party: 'R',\n        color: constants.REPUBLICAN_RED\n    },\n    'Kerry, John F.': {\n        firstName: 'John F.',\n        lastName: 'Kerry',\n        party: 'D',\n        color: constants.DEMOCRAT_BLUE\n    },\n    'Badnarik, Michael': {\n        firstName: 'Michael',\n        lastName: 'Badnarik',\n        party: 'LIB',\n        color: constants.LIBERTARIAN_GOLD\n    }\n};\n\nexport default candidateInfo;\n","import 'aframe';\nimport { scaleLinear } from 'd3-scale';\nimport * as constants from './constants';\nimport candidateInfo from './candidate-info';\n\nconst { AFRAME } = window;\nconst { THREE } = AFRAME;\n\nconst createExtrudedAndScaledGeometry = (height, stateShapes, percentage, zPosition) => {\n    const extrudeSettings = {\n        depth: height,\n        bevelEnabled: false\n    };\n\n    const extrudedFeatureGeometry = new THREE.ExtrudeGeometry(stateShapes, extrudeSettings);\n    extrudedFeatureGeometry.computeBoundingBox();\n    const center = extrudedFeatureGeometry.boundingBox.getCenter(new THREE.Vector3());\n    extrudedFeatureGeometry.center();\n    extrudedFeatureGeometry.scale(percentage, percentage, 1);\n    extrudedFeatureGeometry.translate(center.x, center.y, center.z + zPosition);\n    return extrudedFeatureGeometry;\n};\nconst createExtrudedAndScaledGeometryPerShape = (height, stateShapes, percentage, zPosition) => {\n    const extrudeSettings = {\n        depth: height,\n        bevelEnabled: false\n    };\n    const extrudeGeometry = new THREE.Geometry();\n    stateShapes.forEach((stateShape) => {\n        const extrudedFeatureGeometry = new THREE.ExtrudeGeometry(stateShape, extrudeSettings);\n        extrudedFeatureGeometry.computeBoundingBox();\n        const center = extrudedFeatureGeometry.boundingBox.getCenter(new THREE.Vector3());\n        extrudedFeatureGeometry.center();\n        extrudedFeatureGeometry.scale(percentage, percentage, 1);\n        extrudedFeatureGeometry.translate(center.x, center.y, center.z + zPosition);\n\n        extrudeGeometry.merge(extrudedFeatureGeometry);\n    });\n    return extrudeGeometry;\n};\n\nconst createSelectionMask = (inputGeometry, name, attributes) => {\n    const selectionMaskGeometry = new THREE.BufferGeometry();\n    selectionMaskGeometry.fromGeometry(inputGeometry);\n    selectionMaskGeometry.computeBoundingBox();\n    const center = selectionMaskGeometry.boundingBox.getCenter(new THREE.Vector3());\n    selectionMaskGeometry.translate(-center.x, -center.y, -center.z);\n\n    const mesh = new THREE.Mesh(selectionMaskGeometry);\n    mesh.name = name;\n    const selectionMaskEntity = document.createElement('a-entity');\n    selectionMaskEntity.setAttribute('id', name);\n    selectionMaskEntity.setAttribute('position', center);\n    selectionMaskEntity.setAttribute('class', 'selectable');\n    selectionMaskEntity.setAttribute('selection-info', attributes);\n    selectionMaskEntity.setAttribute('hoverable', '');\n    selectionMaskEntity.setAttribute('material', {\n        visible: false, opacity: 0.25, transparent: true, color: 'white'\n    });\n    selectionMaskEntity.setObject3D('mesh', mesh);\n    return selectionMaskEntity;\n};\n\nAFRAME.registerComponent('cartogram-renderer', {\n    dependencies: ['geo-projection'],\n    schema: {\n        maxExtrudeHeight: {\n            default: 1.6\n        }\n    },\n    init() {\n        this.geoProjectionComponent = this.el.components['geo-projection'];\n        this.system = this.el.sceneEl.systems['geo-projection'];\n        this.handleGeoDataReady = this.handleGeoDataReady.bind(this);\n        this.handleElectionDataReady = this.handleElectionDataReady.bind(this);\n        this.el.addEventListener('geo-data-ready', this.handleGeoDataReady);\n        this.el.addEventListener('election-data-loaded', this.handleElectionDataReady);\n    },\n    remove() {\n        this.el.removeEventListener('geo-data-ready', this.handleGeoDataReady);\n        this.el.removeEventListener('election-data-loaded', this.handleElectionDataReady);\n        this.clearMap(true);\n    },\n    update(oldData) {\n        if (this.data.maxExtrudeHeight !== oldData.maxExtrudeHeight) {\n            this.render();\n        }\n    },\n    handleGeoDataReady() {\n        this.render();\n    },\n    handleElectionDataReady(evt) {\n        const electionDataLoadEvent = evt.detail;\n        this.votesByFipsCode = electionDataLoadEvent.votesByFipsCode;\n        this.maxTotalVoters = electionDataLoadEvent.maxTotalVoters;\n        this.render();\n    },\n    isReady() {\n        return !!(this.votesByFipsCode && this.geoProjectionComponent.geoJson);\n    },\n    render() {\n        this.clearMap();\n        if (!this.isReady()) return;\n\n        // Determine the vertical scale for the entire country using the state with the largest number of total voters\n        // as equaling the max extrude height\n        const extrudeScale = scaleLinear()\n            .domain([0, this.maxTotalVoters])\n            .range([0, this.data.maxExtrudeHeight]);\n\n        const candidateMetadata = {};\n\n        this.geoProjectionComponent.geoJson.features.forEach((feature) => {\n            const votingData = this.votesByFipsCode[feature.id];\n            const mapRenderContext = this.system.renderToContext(feature, this.geoProjectionComponent.projection);\n            const stateShapes = mapRenderContext.toShapes();\n\n            let zPosition = 0;\n\n            const stateSelectionEntity = document.createElement('a-entity');\n            stateSelectionEntity.setAttribute('id', `state-${feature.id}`);\n            stateSelectionEntity.setAttribute('class', 'state-selection-mask');\n\n            votingData.forEach((candidateData) => {\n                const percentage = (candidateData.votes / candidateData.totalVoters);\n                const height = extrudeScale(candidateData.votes);\n\n                if (!candidateMetadata[candidateData.name]) {\n                    const info = candidateInfo[candidateData.name];\n                    candidateMetadata[candidateData.name] = {\n                        geometry: new THREE.Geometry(),\n                        ...info\n                    };\n                }\n                const candidateMetadatum = candidateMetadata[candidateData.name];\n                const extrudeGeometry = candidateMetadatum.geometry;\n\n                // Hawaii, Alaska, and Michigan look better when rendered per shape\n                let featureGeometry;\n                if (feature.id === '15' || feature.id === '02' || feature.id === '26') {\n                    featureGeometry = createExtrudedAndScaledGeometryPerShape(height, stateShapes, percentage, zPosition);\n                } else {\n                    featureGeometry = createExtrudedAndScaledGeometry(height, stateShapes, percentage, zPosition);\n                }\n                extrudeGeometry.merge(featureGeometry);\n\n                const candidateName = `${candidateMetadatum.firstName} ${candidateMetadatum.lastName}`;\n                const attributes = {\n                    state: feature.properties.name,\n                    candidate: candidateName,\n                    party: candidateMetadatum.party,\n                    votes: candidateData.votes,\n                    electoralVotes: candidateData.electoralVotes,\n                    percentage,\n                    totalVotes: candidateData.totalVoters,\n                    color: candidateMetadatum.color.getHexString()\n                };\n                const selectionMask = createSelectionMask(featureGeometry, `${feature.id}-${candidateMetadatum.lastName}`, attributes);\n                stateSelectionEntity.appendChild(selectionMask);\n                zPosition += height;\n            });\n            this.el.appendChild(stateSelectionEntity);\n        });\n\n        Object.keys(candidateMetadata).forEach((candidateName) => {\n            const candidateMetadatum = candidateMetadata[candidateName];\n            // Convert the extrude geometry into a buffer geometry for better rendering performance\n            const extrudeBufferGeometry = new THREE.BufferGeometry();\n            extrudeBufferGeometry.fromGeometry(candidateMetadatum.geometry);\n\n            const material = new THREE.MeshLambertMaterial({ color: candidateMetadatum.color });\n            const extrudedMap = new THREE.Mesh(extrudeBufferGeometry, material);\n            this.el.setObject3D(candidateName, extrudedMap);\n        });\n\n        const mapRenderContextForOutline = this.system.renderToContext(this.geoProjectionComponent.geoJson, this.geoProjectionComponent.projection);\n        const stateOutlineGeometry = new THREE.BufferGeometry();\n        const stateOutlineVertices = mapRenderContextForOutline.toVertices();\n        stateOutlineGeometry.addAttribute('position', new THREE.Float32BufferAttribute(stateOutlineVertices, 3));\n        const stateOutlineMaterial = new THREE.LineBasicMaterial({ color: constants.DARK_GRAY });\n        const stateOutlines = new THREE.LineSegments(stateOutlineGeometry, stateOutlineMaterial);\n        this.el.setObject3D('lines', stateOutlines);\n    },\n    clearMap(clearAll = false) {\n        Object.keys(this.el.object3DMap).forEach((key) => {\n            if (clearAll || !['hoverBox', 'selectionBox', 'outlineMap'].includes(key)) {\n                this.el.removeObject3D(key);\n            }\n        });\n        this.el.querySelectorAll('.state-selection-mask').forEach((maskEl) => {\n            this.el.removeChild(maskEl);\n        });\n    }\n});\n","import 'aframe';\nimport maxVoters from './assets/maxvoters.json';\n\nconst { AFRAME } = window;\n\nAFRAME.registerComponent('election-data-loader', {\n    schema: {\n        year: {\n            type: 'string'\n        }\n    },\n\n    init() {\n        this.handleDataLoaded = this.handleDataLoaded.bind(this);\n        this.handleYearChanged = this.handleYearChanged.bind(this);\n        this.el.sceneEl.addEventListener('year-changed', this.handleYearChanged);\n        this.yearText = document.querySelector('#year');\n    },\n\n    remove() {\n        this.el.sceneEl.removeEventListener('year-changed', this.handleYearChanged);\n    },\n\n    update(oldData) {\n        if (this.data.year && this.data.year !== oldData.year) {\n            fetch(`assets/federalelections${this.data.year}.json`)\n                .then(response => response.json())\n                .then(this.handleDataLoaded)\n                .then(() => { this.yearText.setAttribute('value', this.data.year); })\n                .catch((error) => { console.error(error); });\n        }\n    },\n\n    handleYearChanged(evt) {\n        this.el.setAttribute('election-data-loader', 'year', evt.detail.year);\n    },\n\n    handleDataLoaded(votingData) {\n        const votesByFipsCode = votingData.reduce((accum, d) => {\n            if (!accum[d.fips]) {\n                accum[d.fips] = [];\n            }\n            accum[d.fips].push(d);\n            return accum;\n        }, {});\n        const maxTotalVoters = maxVoters.totalVoters;\n        this.el.emit('election-data-loaded', { votesByFipsCode, maxTotalVoters });\n    }\n});\n","/* eslint-disable */\n// from https://www.npmjs.com/package/aframe-look-at-component\n// temporary until a new version of the component is published\nvar debug = AFRAME.utils.debug;\nvar coordinates = AFRAME.utils.coordinates;\n\nvar warn = debug('components:look-at:warn');\nvar isCoordinates = coordinates.isCoordinates || coordinates.isCoordinate;\n\ndelete AFRAME.components['look-at'];\n\n/**\n * Look-at component.\n *\n * Modifies rotation to either track another entity OR do a one-time turn towards a position\n * vector.\n *\n * If tracking an object via setting the component value via a selector, look-at will register\n * a behavior to the scene to update rotation on every tick.\n */\nAFRAME.registerComponent('look-at', {\n    schema: {\n        default: '',\n\n        parse: function (value) {\n            // A static position to look at.\n            if (isCoordinates(value) || typeof value === 'object') {\n                return coordinates.parse(value);\n            }\n            // A selector to a target entity.\n            return value;\n        },\n\n        stringify: function (data) {\n            if (typeof data === 'object') {\n                return coordinates.stringify(data);\n            }\n            return data;\n        }\n    },\n\n    init: function () {\n        this.target3D = null;\n        this.vector = new THREE.Vector3();\n        this.wpVector = new THREE.Vector3();\n    },\n\n    /**\n     * If tracking an object, this will be called on every tick.\n     * If looking at a position vector, this will only be called once (until further updates).\n     */\n    update: function () {\n        var self = this;\n        var target = self.data;\n        var object3D = self.el.object3D;\n        var targetEl;\n\n        // No longer looking at anything (i.e., look-at=\"\").\n        if (!target || (typeof target === 'object' && !Object.keys(target).length)) {\n            return self.remove();\n        }\n\n        // Look at a position.\n        if (typeof target === 'object') {\n            return object3D.lookAt(new THREE.Vector3(target.x, target.y, target.z));\n        }\n\n        // Assume target is a string.\n        // Query for the element, grab its object3D, then register a behavior on the scene to\n        // track the target on every tick.\n        targetEl = self.el.sceneEl.querySelector(target);\n        if (!targetEl) {\n            warn('\"' + target + '\" does not point to a valid entity to look-at');\n            return;\n        }\n        if (!targetEl.hasLoaded) {\n            return targetEl.addEventListener('loaded', function () {\n                self.beginTracking(targetEl);\n            });\n        }\n        return self.beginTracking(targetEl);\n    },\n\n    tick: function (t) {\n        // Track target object position. Depends on parent object keeping global transforms up\n        // to state with updateMatrixWorld(). In practice, this is handled by the renderer.\n        var target;\n        var target3D = this.target3D;\n        var object3D = this.el.object3D;\n        var vector = this.vector;\n\n        if (target3D) {\n            target3D.getWorldPosition(this.wpVector);\n            target = object3D.parent.worldToLocal(this.wpVector);\n            if (this.el.getObject3D('camera')) {\n                // Flip the vector to -z, looking away from target for camera entities. When using\n                // lookat from THREE camera objects, this is applied for you, but since the camera is\n                // nested into a Object3D, we need to apply this manually.\n                vector.subVectors(object3D.position, target).add(object3D.position);\n            } else {\n                vector = target;\n            }\n            object3D.lookAt(vector);\n        }\n    },\n\n    beginTracking: function (targetEl) {\n        this.target3D = targetEl.object3D;\n    }\n});\n","import 'aframe';\nimport 'aframe-geo-projection-component';\nimport 'super-hands';\nimport 'aframe-animation-component';\nimport 'aframe-haptics-component';\nimport './look-at';\nimport './election-data-loader';\nimport './cartogram-renderer';\nimport './hover-handler';\nimport './selection-handler';\nimport './selection-info';\nimport './year-selector';\nimport './help';\nimport './tutorial';\nimport './tutorial-step';\nimport './text-panel';\nimport './button';\nimport './progressive-controls';\n"],"sourceRoot":""}